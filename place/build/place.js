(()=>{var L=(e,t)=>(e._translate={x:0,y:0},{name:"translate",fn:(o,n)=>{e._translate.x=o,e._translate.y=n,t.style.translate=`${o}px ${n}px`}}),g=L;var R=(e,t)=>({name:"center",fn:()=>{let o=(e._render.vw-t.width)/2,n=(e._render.vh-t.height)/2;e.translate(o,n)}}),u=R;var C=(e,t)=>({name:"load",fn:(o,n={})=>{let s=new Image;s.onload=()=>{let l=n.x||t.width/2-s.width/2,i=n.y||t.height/2-s.height/2;t.getContext("2d").drawImage(s,l,i)},s.src=o}}),p=C;var D=(e,t)=>(e._scale={scale:1,min:.2,max:20},{name:"scale",fn:o=>{e._scale.scale=o,t.style.transform=`scale(${o})`}}),_=D;var w=[g,u,p,_];var Y=(e,t)=>{e._drag={active:!1};let r=({enable:s})=>{e._drag.active=s,s?window.addEventListener("mousemove",n):window.removeEventListener("mousemove",n)},a=()=>r({enable:!0}),o=()=>r({enable:!1}),n=s=>{if(s.preventDefault(),!e._drag.active)return;let l=e._translate.x+s.movementX,i=e._translate.y+s.movementY;e.translate(l,i)};t.addEventListener("mousedown",a),window.addEventListener("mouseup",o)},x=Y;var H=(e,t)=>{let r=o=>{let n=c=>Math.sign(c.deltaY)*-1,s=()=>{let c=4;return e._scale.scale>=2&&e._scale.scale<4&&(c=2),e._scale.scale>=4&&e._scale.scale<8&&(c=1),e._scale.scale>8&&e._scale.scale<16&&(c=.5),e._scale.scale>16&&(c=.25),c},l=n(o),i=s(),d=parseFloat((e._scale.scale+l/i).toFixed(2));return d>e._scale.max&&(d=e._scale.max),d<e._scale.min&&(d=e._scale.min),d},a=o=>{let n=r(o);e.scale(n)};window.addEventListener("wheel",a)},E=H;var W=(e,t)=>{let r=()=>{e.afterRender(),e.center()};window.addEventListener("resize",r)},v=W;var y=[x,E,v];var X=(e,t)=>{let r=()=>{let{x:n,y:s}=e._translate,{centerX:l,centerY:i}=e._render,{top:d,bottom:c,left:h,right:f}=t.getBoundingClientRect();f<l&&(n=n+(l-f)),h>l&&(n=n-(h-l)),c<i&&(s=s+(i-c)),d>i&&(s=s-(d-i)),a(n,s)},a=e.translate;e.translate=(n,s)=>{a(n,s),r()};let o=e.scale;e.scale=n=>{o(n),r()}},M=X;var z=[M];var m=class{_render={vw:0,vh:0,centerX:0,centerY:0};constructor(t={}){let r=this.render(t);this.registerOperations(r),this.registerHandlers(r),this.registerConstraints(r)}render(t){let r=document.createElement("canvas");return r.width=t.width,r.height=t.height,document.querySelector(t.renderTo).appendChild(r),this.afterRender(),r}afterRender(){let t=r=>parseInt(r.toFixed(0));this._render.vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),this._render.vh=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),this._render.centerX=t(this._render.vw/2),this._render.centerY=t(this._render.vh/2)}registerOperations(t){w.reduce((r,a)=>{let{name:o,fn:n}=a(this,t);return r[o]=n,r},this)}registerHandlers(t){y.forEach(r=>r(this,t))}registerConstraints(t){z.forEach(r=>r(this,t))}};var F={Canvas:m};window.Place={ui:F};})();
